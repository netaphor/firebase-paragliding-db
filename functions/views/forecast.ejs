<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .notFlyable {
            background-color: #ffcccc;
        }
        .flyable {
            background-color: #ccffcc;
        }
        .marginal {
            background-color: #ffffcc;
        }
        .arrow-container {
            display: flex;
            flex-wrap: wrap;
            width: 200px;
            margin: 0 auto;
        }
        .arrow {
            width: 4px;
            height: 10px;
            background: black;
            position: relative;
            margin: 20px;
            display: inline-block;
            transform-origin: bottom center;
        }

            /* Arrowhead using a triangle */
        .arrow::after {
            content: '';
            position: absolute;
            top: 100%; /* now it's at the tip */
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 12px solid black;
        }
        .dir-n { transform: rotate(0deg); }
        .dir-nne { transform: rotate(22.5deg); }
        .dir-ne { transform: rotate(45deg); }
        .dir-ene { transform: rotate(67.5deg); }
        .dir-e { transform: rotate(90deg); }
        .dir-ese { transform: rotate(112.5deg); }
        .dir-se { transform: rotate(135deg); }
        .dir-sse { transform: rotate(157.5deg); }
        .dir-s { transform: rotate(180deg); }
        .dir-ssw { transform: rotate(202.5deg); }
        .dir-sw { transform: rotate(225deg); }
        .dir-wsw { transform: rotate(247.5deg); }
        .dir-w { transform: rotate(270deg); }
        .dir-wnw { transform: rotate(292.5deg); }
        .dir-nw { transform: rotate(315deg); }
        .dir-nnw { transform: rotate(337.5deg); }

        td {
            padding:0;
        }
    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paragliding Dashboards</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
</head>
<body>
<div class="container mt-5"></div>
      
    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Time</th>
                    <% let days = [...new Set(forecastData.map(f => new Date(f.time).toLocaleDateString('en-US', {weekday: 'short'})))]; %>
                    <% days.forEach(function(day) { %>
                        <th><%= day %></th>
                    <% }); %>
                </tr>
            </thead>
            <tbody>
                <% for(let hour = 0; hour < 24; hour += 3) { %>
                    <tr>
                        <td><%= String(hour).padStart(2, '0') %>:00</td>
                        <% days.forEach(function(day) { %>
                            <td>
                                <% let forecast = forecastData.find(f => 
                                    new Date(f.time).toLocaleDateString('en-US', {weekday: 'short'}) === day && 
                                    new Date(f.time).getHours() === hour
                                ); %>
                                <div class="<%= forecast.flyingConditions %>">
                                    <% if (forecast && forecast.windDirectionCompass) { %>
                                        <p><%= forecast.windSpeedMph %>mph gusting <%= forecast.windGustMph %>mph</p>
                                        <div class="arrow dir-<%= forecast.windDirectionCompass.toLowerCase() %>"></div>
                                    <% } %>
                                    <% if (forecast && forecast.sites) { %>
                                        <%= forecast.sites.join(', ') %>
                                    <% } %>
                                </div>
                            </td>
                        <% }); %>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>


</div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>